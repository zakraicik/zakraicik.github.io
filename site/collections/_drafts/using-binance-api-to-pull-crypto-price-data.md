---
date: 2023-04-11 00:00:00
title: Using Binance API to pull Crypto Price Data
description:
tags:
image: /uploads/binance-api.png
---
# Binance API for Historical Crypto Prices

Over the weekend, I wrote a script that tried using [ccxt](https://github.com/ccxt/ccxt){: target="_blank" rel="noopener"}&nbsp;to pull price data for various crypto assets. According to their GitHub repo, the CCXT library is used to connect and trade with cryptocurrency exchanges and payment processing services worldwide. It provides quick access to market data for storage, analysis, visualization, indicator development, algorithmic trading, strategy backtesting, bot programming, and related software engineering.

In trying to use the library to pull price data from Binance, I&nbsp; was getting a bunch of errors claiming that price data couldn't be provided due to my geographic location. This didn't make much sense to me since I'm located in California. Instead of spin my wheels, I put together some code that can be used to hit Binance's API directly.

Specifically, the remainder of this article covers.&nbsp;

* Setting up an API key to be able to use the Binance API&nbsp;
* Pulling prices using Binance API and storing them in S3

The full repository can be found [here](https://github.com/zakraicik/crypto_trader){: target="_blank" rel="noopener"}. Keep in mind this article covers one part of a bigger project.&nbsp;

## Binance API Key

Before we write any code to access the Binance API, we need to first set up an API key. An API key is a code or token that is generated by an API (Application Programming Interface) provider and is used to authenticate and authorize access to its services or data. In other words, it tells Binance it's okay for this user to pull our price data.&nbsp;

To set up an API key, take the following steps.&nbsp;

* Create a [Binance](binance.us){: target="_blank" rel="noopener"} account
* Navigate to the [API management screen](https://www.binance.us/settings/api-management?tab=exchange){: target="_blank" rel="noopener"}
* Click the button to create a new API key Once you have finished these three steps, you will see two values - an API key and a secret key.&nbsp;

## Storing API Keys

Now that we have an API key, we need to store them in a place where our code can access them. There are many different ways to do this.

1. **Environment Variables:** Environment variables are a common way to store API keys securely. This method involves setting environment variables on your local machine and then retrieving them in your Python code using the os.environ.get() method.
2. **Config Files:** Another way to store API keys is to use a configuration file that contains the API keys. This file can be encrypted or stored in a secure location to prevent unauthorized access. You can read the API key from this file using libraries such as configparser or JSON.
3. **Keyring Libraries:** Keyring libraries are a secure and platform-independent way to store API keys. These libraries provide a simple API that allows you to store and retrieve API keys from the system keyring.
4. **Python Modules:** You can store API keys in a separate Python module and import it into your main code. This module can be encrypted or stored in a secure location to prevent unauthorized access.
5. **External Services:** Finally, you can use external services such as AWS Secrets Manager or HashiCorp Vault to securely store your API keys. These services provide encryption, access controls, and auditing capabilities to help you manage and secure your API keys.

For our project, we will store the required API keys in a separate python module named `keys.py`. Doing it this way was fast, and makes it easy to import the keys to other modules.&nbsp;`keys.py` will be excluded from any github commits, which ensures the keys won't be exposed in public repositories or in production environments

A completed keys.py will look something like this.&nbsp;

```python
API_KEY = "<API_KEY>"
AWS_ACCESS_KEY_ID = "<AWS_ACCESS_KEY_ID>"
AWS_SECRET_ACCESS_KEY = "<AWS_SECRET_ACCESS_KEY>"
```

## Helper Functions

In addition to `keys.py`, we will also create `helper.py`. A helper.py file is typically used to store helper functions or utility functions that are used throughout an application or project. These functions are designed to perform specific tasks and can be reused across different parts of the application.

The first thing in our helper file is .&nbsp;

## Putting it All Together

At this point, we should have everything we need to put the code together to make a request to the Binance API.&nbsp;

##